---
const { title = 'Chen Yang — Academic Homepage', description = 'Research, publications, projects, and contact' } = Astro.props;
---

<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="/favicon.svg" />
    <meta name="description" content={description} />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet" />
    <meta name="color-scheme" content="light dark" />
    <script is:inline>
      const stored = localStorage.getItem('theme');
      const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
      const theme = stored || (prefersDark ? 'dark' : 'light');
      document.documentElement.dataset.theme = theme;
    </script>
    <!-- Global CSS is now included via Tailwind -->
    <style is:global>
      :root { --brand: 56 189 248; }
      html { font-family: Inter, "Noto Sans SC", system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji"; }
      [data-theme='dark'] body { background-color: #0f172a; color: #e5e7eb; }
    </style>
  </head>
  <body class="min-h-dvh bg-white text-slate-800 dark:bg-slate-950 dark:text-slate-200">
    <header class="sticky top-0 z-40 backdrop-blur supports-[backdrop-filter]:bg-white/70 dark:supports-[backdrop-filter]:bg-slate-900/60 border-b border-slate-200/60 dark:border-slate-700/60">
      <nav class="mx-auto max-w-6xl px-5 h-16 flex items-center justify-between">
        <a href="/" class="font-semibold tracking-tight text-lg md:text-xl">Chen Yang</a>
        <ul class="hidden sm:flex gap-6 text-base">
          <li><a class="hover:text-sky-600" href="/#about">About</a></li>
          <li><a class="hover:text-sky-600" href="/#publications">Publications</a></li>
          <li><a class="hover:text-sky-600" href="/#awards">Awards</a></li>
          <li><a class="hover:text-sky-600" href="/#experience">Experience</a></li>
          <li><a class="hover:text-sky-600" href="/#miscellaneous">Miscellaneous</a></li>
          <li><a class="hover:text-sky-600" href="/#contact">Contact</a></li>
        </ul>
        <div class="flex items-center gap-1">
          <button id="theme-toggle" aria-label="Toggle theme" class="p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-800">
            <svg id="icon-sun" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="size-5 hidden dark:block"><path fill="currentColor" d="M6.76 4.84l-1.8-1.79L3.17 4.84l1.79 1.79l1.8-1.79zm10.48 14.32l1.79 1.79l1.79-1.79l-1.79-1.79l-1.79 1.79zM1 13h3v-2H1v2zm19-2v2h3v-2h-3zM3.17 19.16l1.79 1.79l1.8-1.79l-1.8-1.79l-1.79 1.79zM18.24 4.84l1.79-1.79l-1.79-1.79l-1.79 1.79l1.79 1.79zM12 4c.55 0 1-.45 1-1V1h-2v2c0 .55.45 1 1 1zm0 16c-.55 0-1 .45-1 1v2h2v-2c0-.55-.45-1-1-1zM12 6a6 6 0 100 12A6 6 0 0012 6z"/></svg>
            <svg id="icon-moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="size-5 dark:hidden"><path fill="currentColor" d="M9.37 5.51A7 7 0 0012 19a7 7 0 006.49-9.37a.75.75 0 00-1.22-.29a5.5 5.5 0 01-7.61-7.61a.75.75 0 00-.29-1.22A7 7 0 009.37 5.5z"/></svg>
          </button>
        </div>
      </nav>
    </header>

    <main class="mx-auto max-w-6xl px-5 py-14">
      <slot />
    </main>

    <!-- Clustrmaps Globe -->
    <div class="border-t border-slate-200/60 dark:border-slate-800/60 py-10">
      <div class="mx-auto max-w-6xl px-5">
        <div class="flex justify-center">
          <script type="text/javascript" id="clstr_globe" src="//clustrmaps.com/globe.js?d=pV71LnC71IrfEBQZBzoLe3YrtnJhQ5qtWT6to28Cu4o&w=300&h=300"></script>
        </div>
      </div>
    </div>

    <footer class="border-t border-slate-200/60 dark:border-slate-800/60 py-10">
      <div class="mx-auto max-w-6xl px-5 text-sm text-slate-500 dark:text-slate-400">
        © {new Date().getFullYear()} Chen Yang. All rights reserved.
      </div>
    </footer>

    <script is:inline>
      const btn = document.getElementById('theme-toggle');
      btn?.addEventListener('click', () => {
        const next = document.documentElement.dataset.theme === 'dark' ? 'light' : 'dark';
        document.documentElement.dataset.theme = next;
        localStorage.setItem('theme', next);
      });

      // Smooth scroll for same-page anchors from navbar
      document.querySelectorAll('nav a[href^="/#"]').forEach((a) => {
        a.addEventListener('click', (e) => {
          const href = (e.currentTarget).getAttribute('href');
          if (!href) return;
          const id = href.replace('/#', '');
          const el = document.getElementById(id);
          if (el) {
            e.preventDefault();
            el.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        });
      });
    </script>
  </body>
</html> 